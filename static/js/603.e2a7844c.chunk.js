"use strict";(self.webpackChunkstockfish_web=self.webpackChunkstockfish_web||[]).push([[603],{147:(e,n,t)=>{t.d(n,{R:()=>s});const s={captureSound:new Audio("./sound/capture.mp3"),castlingSound:new Audio("./sound/castling.mp3"),checkSound:new Audio("./sound/check.mp3"),checkmateSound:new Audio("./sound/checkmate.mp3"),moveSound:new Audio("./sound/move.mp3")};for(let o of Object.keys(s))s[o].volume=.2},603:(e,n,t)=>{t.r(n),t.d(n,{default:()=>R});var s=t(371);const o="MyChessAiChessboard_MyChessAiChessboard__lNWbI",c="MyChessAiChessboard_chessboardWrapper__tpFwL",a="MyChessAiChessboard_buttons__wzM8L";var r=t(43),i=t(629),l=t.n(i),d=t(846),u=t(147),A=t(801),h=t(445);const m=function(e){return e.slice().reverse()},p=[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,-.5,-1,0,0,-1,-.5,.5],[.5,1,1,-2,-2,1,1,.5],[0,0,0,0,0,0,0,0]],C=m(p),v=[[-5,-4,-3,-3,-3,-3,-4,-5],[-4,-2,0,0,0,0,-2,-4],[-3,0,1,1.5,1.5,1,0,-3],[-3,.5,1.5,2,2,1.5,.5,-3],[-3,0,1.5,2,2,1.5,0,-3],[-3,.5,1,1.5,1.5,1,.5,-3],[-4,-2,0,.5,.5,0,-2,-4],[-5,-4,-3,-3,-3,-3,-4,-5]],x=[[-2,-1,-1,-1,-1,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,1,1,.5,0,-1],[-1,.5,.5,1,1,.5,.5,-1],[-1,0,1,1,1,1,0,-1],[-1,1,1,1,1,1,1,-1],[-1,.5,0,0,0,0,.5,-1],[-2,-1,-1,-1,-1,-1,-1,-2]],g=m(x),f=[[0,0,0,0,0,0,0,0],[.5,1,1,1,1,1,1,.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[0,0,0,.5,.5,0,0,0]],k=m(f),w=[[-2,-1,-1,-.5,-.5,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,.5,.5,.5,0,-1],[-.5,0,.5,.5,.5,.5,0,-.5],[0,0,.5,.5,.5,.5,0,-.5],[-1,.5,.5,.5,.5,.5,0,-1],[-1,0,.5,0,0,0,0,-1],[-2,-1,-1,-.5,-.5,-1,-1,-2]],j=[[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-2,-3,-3,-4,-4,-3,-3,-2],[-1,-2,-2,-2,-2,-2,-2,-1],[2,2,0,0,0,0,2,2],[2,3,1,0,0,1,3,2]],E=m(j),_=function(e,n,t){if(null===e)return 0;const s=function(e,n,t,s){if("p"===e.type)return 10+(n?p[s][t]:C[s][t]);if("r"===e.type)return 50+(n?f[s][t]:k[s][t]);if("n"===e.type)return 30+v[s][t];if("b"===e.type)return 30+(n?x[s][t]:g[s][t]);if("q"===e.type)return 90+w[s][t];if("k"===e.type)return 900+(n?j[s][t]:E[s][t]);throw new Error("Unknown piece type: "+e.type)}(e,"w"===e.color,n,t);return"w"===e.color?s:-s},S=function(e,n,t,s,o,c){const a=(new Date).getTime();if(0===e||a-c.getTime()>1e3*e)return-function(e){let n=0;for(let t=0;t<8;t++)for(let s=0;s<8;s++)n+=_(e[t][s],t,s);return n}(n.board());const r=n.moves();if(o){let o=-9999;for(let a=0;a<r.length&&(n.move(r[a]),o=Math.max(o,S(e-1,n,t,s,!1,c)),n.undo(),!(s<=(t=Math.max(t,o))));a++);return o}{let o=9999;for(let a=0;a<r.length&&(n.move(r[a]),o=Math.min(o,S(e-1,n,t,s,!0,c)),n.undo(),!((s=Math.min(s,o))<=t));a++);return o}};var y=t(935),b=t(579);const N=e=>{let{className:n}=e;const t=(0,r.useMemo)((()=>new(l())),[]),[i,m]=(0,r.useState)(t.fen()),[p,C]=(0,r.useState)(3),[v,x]=(0,r.useState)("white"),[g,f]=(0,r.useState)(!1),[k,w]=(0,r.useState)(!1),j=(0,r.useCallback)((()=>{w(!k)}),[k]);function E(e){const n=t.move(e);return m(t.fen()),null!==n&&(t.game_over()||t.in_draw()?(u.R.checkmateSound.play(),w(!0),!1):t.in_check()?(u.R.checkSound.play(),!0):"O-O-O"===n.san||"O-O"===n.san?(u.R.castlingSound.play(),!0):n.captured?(u.R.captureSound.play(),!0):(u.R.moveSound.play(),!0))}function _(e){console.log("selected depth: ",p),console.log("ai is black? ",e);const n=new Date,s=function(e,n,t,s){const o=n.moves();if(0===o.length)return;if(1===o.length)return o[0];let c,a=t?-9999:9999;console.log(o);for(let r=0;r<o.length;r++){const i=o[r];n.move(i);const l=S(e-1,n,-1e4,1e4,!t,s);n.undo(),(t&&l>a||!t&&l<a)&&(a=l,c=i)}return c}(p,t,!e,n);E(s)}return(0,b.jsxs)("div",{className:(0,s.x)(o,{},[n]),children:[(0,b.jsxs)("div",{className:c,children:[(0,b.jsx)(d.Ve,{id:"PlayVsMyAi",position:i,onPieceDrop:function(e,n,t){console.log("[Player move] ".concat(e," \u2192 ").concat(n),t);const s=E({from:e,to:n,promotion:t[1].toLowerCase()});return s&&setTimeout((()=>{_(g)}),500),s},boardOrientation:v}),(0,b.jsxs)("div",{className:a,children:[(0,b.jsx)(h.$n,{onClick:()=>{t.reset(),m(t.fen()),w(!1),f(!1)},children:"\u041d\u043e\u0432\u0430\u044f \u0438\u0433\u0440\u0430"}),(0,b.jsx)(h.$n,{onClick:()=>{t.undo(),t.undo(),m(t.fen())},children:"\u041d\u0430\u0437\u0430\u0434"}),(0,b.jsx)(h.$n,{onClick:()=>{x("black"===v?"white":"black")},children:"\u041f\u0435\u0440\u0435\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u0441\u043a\u0443"}),(0,b.jsx)(h.$n,{onClick:()=>{_(!g),f(!g)},children:"\u0425\u043e\u0434\u0438"})]}),(0,b.jsx)(y.o,{fenPosition:i,onChange:e=>{const{valid:n}=t.validate_fen(e);n&&(t.load(e),m(t.fen()))}}),(0,b.jsxs)("div",{className:"info",children:["\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u043e\u0438\u0441\u043a\u0430:",(0,b.jsx)("select",{id:"search-depth",value:"".concat(p),onChange:e=>{const n=e.target.value;C(+n)},children:[1,2,3,4,5].map((e=>(0,b.jsx)("option",{value:"".concat(e),children:e},"".concat(e))))}),(0,b.jsx)("p",{children:"\u041f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435 \u0433\u043b\u0443\u0431\u0438\u043d\u044b, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u0431\u0434\u0443\u043c\u044b\u0432\u0430\u043d\u0438\u044f \u0434\u0432\u0438\u0436\u043a\u0430 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0432\u043d\u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0430 * \u0441\u0435\u043a\u0443\u043d\u0434\u0443"})]})]}),(0,b.jsxs)(A.a,{isOpen:k,onClose:j,children:[(0,b.jsx)("p",{children:"\u0418\u0433\u0440\u0430 \u043e\u043a\u043e\u043d\u0447\u0435\u043d\u0430!"}),(0,b.jsxs)("div",{className:a,children:[(0,b.jsx)(h.$n,{onClick:()=>{t.reset(),m(t.fen()),w(!1)},children:"\u041d\u043e\u0432\u0430\u044f \u0438\u0433\u0440\u0430"}),(0,b.jsx)(h.$n,{onClick:()=>{w(!1)},children:"\u041d\u0430\u0437\u0430\u0434"})]})]})]})},R=e=>{let{className:n}=e;return(0,b.jsx)("div",{children:(0,b.jsx)(N,{})})}},801:(e,n,t)=>{t.d(n,{a:()=>h});var s=t(371),o=t(43),c=t(950);const a=e=>{const{children:n,element:t=document.body}=e;return(0,c.createPortal)(n,t)},r="Modal_Modal__47RDU",i="Modal_overlay__lpaR1",l="Modal_content__TWhw1",d="Modal_opened__iZlPA",u="Modal_isClosing__AoAui";var A=t(579);const h=e=>{const{className:n,children:t,isOpen:c,onClose:h}=e,[m,p]=(0,o.useState)(!1),C=(0,o.useRef)(null),v=(0,o.useCallback)((()=>{h&&(p(!0),C.current=setTimeout((()=>{h(),p(!1)}),300))}),[h]),x=(0,o.useCallback)((e=>{"Escape"===e.key&&v()}),[v]);(0,o.useEffect)((()=>(console.log(""),c&&window.addEventListener("keydown",x),()=>{clearTimeout(C.current),window.removeEventListener("keydown",x)})),[c,x]);const g={[d]:c,[u]:m};return(0,A.jsx)(a,{children:(0,A.jsx)("div",{className:(0,s.x)(r,g,[n]),children:(0,A.jsx)("div",{className:i,onClick:v,children:(0,A.jsx)("div",{className:l,onClick:e=>{e.stopPropagation()},children:t})})})})}},935:(e,n,t)=>{t.d(n,{o:()=>m});var s=t(371);const o="FenInput_FenInput__+TRAY",c="FenInput_copyButton__j+z8x";var a=t(555),r=t(986);const i="Input_Input__hHLh7";var l=t(579);const d=["className"],u=e=>{const{className:n}=e,t=(0,r.A)(e,d);return(0,l.jsx)("input",(0,a.A)({className:(0,s.x)(i,{},[n])},t))};var A=t(43),h=t(445);const m=e=>{let{className:n,fenPosition:t,onChange:a}=e;const[r,i]=(0,A.useState)(!1);return(0,l.jsxs)("div",{className:(0,s.x)(o,{},[n]),children:[(0,l.jsx)(u,{value:r?"":t,onChange:e=>{const n=e.target.value;""!==n&&(i(!1),a&&a(n))},placeholder:"\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043f\u043e\u0437\u0438\u0446\u0438\u044e FEN, \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u0447\u0430\u0442\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),(0,l.jsx)(h.$n,{onClick:()=>{i(!0)},theme:h.Ox.CLEAR,square:!0,children:(0,l.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAJ2QAACdkBFedbSQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAADsSURBVFiFxZdRCoMwDEDfdrv+TZhY2E6v3sKC+1jLZKti02QNCKKS96w1bQAcMMWjwz46YI48RzxZ4xEAbwj3kZF407fACixGEj7m3rJGeA9JwFYiBw9sPnm/88BTAX46t4VEcU5NCXEuDYnqHDUJ1EZRkkh9Ht0LEu7BH1J4iYQZ/IyEOTzFkAEtO9cGbXiK3EiYv/lZCRH8KhC4CO+pRG7CWSxg2Wg6CY9+tZJipQ5PYSZRUmTUJSQVTk2iprxWS2jUdrGE5sJSLNF0U9p0W968MZmN4UcSP73hv5vTET7t+QjcDOEpug3PvQCCkD3RJqwD7gAAAABJRU5ErkJggg==",width:32,alt:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})}),(0,l.jsx)(h.$n,{onClick:async()=>{await navigator.clipboard.writeText(t),console.log("copied")},theme:h.Ox.CLEAR,className:c,square:!0,children:(0,l.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAADsAAAA7AF5KHG9AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAATVJREFUWIXt179KxEAQx/GP3pVaKPgMKhy2FmJnYWV3PoaPIIJv4L2EYCFWJ2hpow8gXC+CFgp67XkWd5E1Ekk2uT9FvhDCTjIzP3azkx1mzEJqvIwjtNCIjNnDCQZFHZt4wLCCay9G+U5FyR+xFiOgHQS5xFJMkKIsZtjP0Z+GgGaG/Ss1XsW2+Fnp4x5veQWE7OIKK5HJE95xgLvQmLUEIZ0KkhvHOEsb88xAa3wfGO3vXsHE62O/Brb+ezHcBe3Anti6BROHXAdxfpFnCRI+Swj4yHpQRMBEqAXUAmoBtYBQQFjpMitX1YQ/oxucGtXr21kIGOB4WokT5uobmHsBsY1KWd+fg8QLNiL8N/Eq40CSh2fVNCxDPKWD51mCPwfJEnTShnRzmsUh9pXrC7q4iPSfHN8P6WXseTd0UwAAAABJRU5ErkJggg==",alt:"\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})})]})}}}]);
//# sourceMappingURL=603.e2a7844c.chunk.js.map