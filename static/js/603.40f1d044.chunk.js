"use strict";(self.webpackChunkstockfish_web=self.webpackChunkstockfish_web||[]).push([[603],{147:(e,n,o)=>{o.d(n,{R:()=>t});const t={captureSound:new Audio("./sound/capture.mp3"),castlingSound:new Audio("./sound/castling.mp3"),checkSound:new Audio("./sound/check.mp3"),checkmateSound:new Audio("./sound/checkmate.mp3"),moveSound:new Audio("./sound/move.mp3")};for(let s of Object.keys(t))t[s].volume=.2},603:(e,n,o)=>{o.r(n),o.d(n,{default:()=>N});var t=o(371);const s="MyChessAiChessboard_MyChessAiChessboard__lNWbI",c="MyChessAiChessboard_chessboardWrapper__tpFwL",r="MyChessAiChessboard_buttons__wzM8L";var l=o(43),a=o(629),i=o.n(a),d=o(846),u=o(147),h=o(801),m=o(445);const p=function(e){return e.slice().reverse()},f=[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,-.5,-1,0,0,-1,-.5,.5],[.5,1,1,-2,-2,1,1,.5],[0,0,0,0,0,0,0,0]],v=p(f),k=[[-5,-4,-3,-3,-3,-3,-4,-5],[-4,-2,0,0,0,0,-2,-4],[-3,0,1,1.5,1.5,1,0,-3],[-3,.5,1.5,2,2,1.5,.5,-3],[-3,0,1.5,2,2,1.5,0,-3],[-3,.5,1,1.5,1.5,1,.5,-3],[-4,-2,0,.5,.5,0,-2,-4],[-5,-4,-3,-3,-3,-3,-4,-5]],w=[[-2,-1,-1,-1,-1,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,1,1,.5,0,-1],[-1,.5,.5,1,1,.5,.5,-1],[-1,0,1,1,1,1,0,-1],[-1,1,1,1,1,1,1,-1],[-1,.5,0,0,0,0,.5,-1],[-2,-1,-1,-1,-1,-1,-1,-2]],_=p(w),x=[[0,0,0,0,0,0,0,0],[.5,1,1,1,1,1,1,.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[0,0,0,.5,.5,0,0,0]],y=p(x),C=[[-2,-1,-1,-.5,-.5,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,.5,.5,.5,0,-1],[-.5,0,.5,.5,.5,.5,0,-.5],[0,0,.5,.5,.5,.5,0,-.5],[-1,.5,.5,.5,.5,.5,0,-1],[-1,0,.5,0,0,0,0,-1],[-2,-1,-1,-.5,-.5,-1,-1,-2]],j=[[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-2,-3,-3,-4,-4,-3,-3,-2],[-1,-2,-2,-2,-2,-2,-2,-1],[2,2,0,0,0,0,2,2],[2,3,1,0,0,1,3,2]],b=p(j),g=function(e,n,o){if(null===e)return 0;const t=function(e,n,o,t){if("p"===e.type)return 10+(n?f[t][o]:v[t][o]);if("r"===e.type)return 50+(n?x[t][o]:y[t][o]);if("n"===e.type)return 30+k[t][o];if("b"===e.type)return 30+(n?w[t][o]:_[t][o]);if("q"===e.type)return 90+C[t][o];if("k"===e.type)return 900+(n?j[t][o]:b[t][o]);throw new Error("Unknown piece type: "+e.type)}(e,"w"===e.color,n,o);return"w"===e.color?t:-t},M=function(e,n,o,t,s,c){const r=(new Date).getTime();if(0===e||r-c.getTime()>1e3*e)return-function(e){let n=0;for(let o=0;o<8;o++)for(let t=0;t<8;t++)n+=g(e[o][t],o,t);return n}(n.board());const l=n.moves();if(s){let s=-9999;for(let r=0;r<l.length&&(n.move(l[r]),s=Math.max(s,M(e-1,n,o,t,!1,c)),n.undo(),!(t<=(o=Math.max(o,s))));r++);return s}{let s=9999;for(let r=0;r<l.length&&(n.move(l[r]),s=Math.min(s,M(e-1,n,o,t,!0,c)),n.undo(),!((t=Math.min(t,s))<=o));r++);return s}};var S=o(579);const A=e=>{let{className:n}=e;const o=(0,l.useMemo)((()=>new(i())),[]),[a,p]=(0,l.useState)(o.fen()),[f,v]=(0,l.useState)(3),[k,w]=(0,l.useState)("white"),[_,x]=(0,l.useState)(!1),[y,C]=(0,l.useState)(!1),j=(0,l.useCallback)((()=>{C(!y)}),[y]);function b(e){const n=o.move(e);return p(o.fen()),null!==n&&(o.game_over()||o.in_draw()?(u.R.checkmateSound.play(),C(!0),!1):o.in_check()?(u.R.checkSound.play(),!0):"O-O-O"===n.san||"O-O"===n.san?(u.R.castlingSound.play(),!0):n.captured?(u.R.captureSound.play(),!0):(u.R.moveSound.play(),!0))}function g(e){console.log("selected depth: ",f),console.log("ai is black? ",e);const n=new Date,t=function(e,n,o,t){const s=n.moves();let c,r=o?-9999:9999;console.log(s);for(let l=0;l<s.length;l++){const a=s[l];n.move(a);const i=M(e-1,n,-1e4,1e4,!o,t);n.undo(),(o&&i>r||!o&&i<r)&&(r=i,c=a)}return c}(f,o,!e,n);b(t)}return(0,S.jsxs)("div",{className:(0,t.x)(s,{},[n]),children:[(0,S.jsxs)("div",{className:c,children:[(0,S.jsx)(d.Ve,{id:"PlayVsMyAi",position:a,onPieceDrop:function(e,n,o){console.log("[Player move] ".concat(e," \u2192 ").concat(n),o);const t=b({from:e,to:n,promotion:o[1].toLowerCase()});return t&&setTimeout((()=>{g(_)}),500),t},boardOrientation:k}),(0,S.jsxs)("div",{className:r,children:[(0,S.jsx)(m.$n,{onClick:()=>{o.reset(),p(o.fen()),C(!1),x(!1)},children:"\u041d\u043e\u0432\u0430\u044f \u0438\u0433\u0440\u0430"}),(0,S.jsx)(m.$n,{onClick:()=>{o.undo(),o.undo(),p(o.fen())},children:"\u041d\u0430\u0437\u0430\u0434"}),(0,S.jsx)(m.$n,{onClick:()=>{w("black"===k?"white":"black")},children:"\u041f\u0435\u0440\u0435\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u0441\u043a\u0443"}),(0,S.jsx)(m.$n,{onClick:()=>{g(!_),x(!_)},children:"\u0425\u043e\u0434\u0438"})]}),(0,S.jsxs)("div",{className:"info",children:["\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u043e\u0438\u0441\u043a\u0430:",(0,S.jsx)("select",{id:"search-depth",value:"".concat(f),onChange:e=>{const n=e.target.value;v(+n)},children:[1,2,3,4,5].map((e=>(0,S.jsx)("option",{value:"".concat(e),children:e},"".concat(e))))}),(0,S.jsx)("p",{children:"\u041f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435 \u0433\u043b\u0443\u0431\u0438\u043d\u044b, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u0431\u0434\u0443\u043c\u044b\u0432\u0430\u043d\u0438\u044f \u0434\u0432\u0438\u0436\u043a\u0430 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0432\u043d\u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0430 * \u0441\u0435\u043a\u0443\u043d\u0434\u0443"})]})]}),(0,S.jsxs)(h.a,{isOpen:y,onClose:j,children:[(0,S.jsx)("p",{children:"\u0418\u0433\u0440\u0430 \u043e\u043a\u043e\u043d\u0447\u0435\u043d\u0430!"}),(0,S.jsxs)("div",{className:r,children:[(0,S.jsx)(m.$n,{onClick:()=>{o.reset(),p(o.fen()),C(!1)},children:"\u041d\u043e\u0432\u0430\u044f \u0438\u0433\u0440\u0430"}),(0,S.jsx)(m.$n,{onClick:()=>{C(!1)},children:"\u041d\u0430\u0437\u0430\u0434"})]})]})]})},N=e=>{let{className:n}=e;return(0,S.jsx)("div",{children:(0,S.jsx)(A,{})})}},801:(e,n,o)=>{o.d(n,{a:()=>m});var t=o(371),s=o(43),c=o(950);const r=e=>{const{children:n,element:o=document.body}=e;return(0,c.createPortal)(n,o)},l="Modal_Modal__47RDU",a="Modal_overlay__lpaR1",i="Modal_content__TWhw1",d="Modal_opened__iZlPA",u="Modal_isClosing__AoAui";var h=o(579);const m=e=>{const{className:n,children:o,isOpen:c,onClose:m}=e,[p,f]=(0,s.useState)(!1),v=(0,s.useRef)(null),k=(0,s.useCallback)((()=>{m&&(f(!0),v.current=setTimeout((()=>{m(),f(!1)}),300))}),[m]),w=(0,s.useCallback)((e=>{"Escape"===e.key&&k()}),[k]);(0,s.useEffect)((()=>(console.log(""),c&&window.addEventListener("keydown",w),()=>{clearTimeout(v.current),window.removeEventListener("keydown",w)})),[c,w]);const _={[d]:c,[u]:p};return(0,h.jsx)(r,{children:(0,h.jsx)("div",{className:(0,t.x)(l,_,[n]),children:(0,h.jsx)("div",{className:a,onClick:k,children:(0,h.jsx)("div",{className:i,onClick:e=>{e.stopPropagation()},children:o})})})})}}}]);
//# sourceMappingURL=603.40f1d044.chunk.js.map