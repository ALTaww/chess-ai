"use strict";(self.webpackChunkstockfish_web=self.webpackChunkstockfish_web||[]).push([[794],{145:(e,s,o)=>{o.d(s,{_:()=>n});const n={chessDefaultPosition:"board-pos"}},147:(e,s,o)=>{o.d(s,{R:()=>n});const n={captureSound:new Audio("./sound/capture.mp3"),castlingSound:new Audio("./sound/castling.mp3"),checkSound:new Audio("./sound/check.mp3"),checkmateSound:new Audio("./sound/checkmate.mp3"),moveSound:new Audio("./sound/move.mp3")};for(let t of Object.keys(n))n[t].volume=.2},794:(e,s,o)=>{o.r(s),o.d(s,{default:()=>b});var n=o(371);const t="StockfishOnlineChessboard_StockfishOnlineChessboard__Xm861",c="StockfishOnlineChessboard_chessboardWrapper__LJGcy",a="StockfishOnlineChessboard_buttons__0Mnm9";var r=o(445),i=o(43),d=o(629),l=o.n(d),u=o(846),h=o(147),m=o(2),p=o(145),f=o(722),k=o(579);const S={easy:{text:"\u041b\u0435\u0433\u043a\u043e \ud83e\udd13",depth:5},normal:{text:"\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e \ud83e\uddd0",depth:8},hard:{text:"\u0421\u043b\u043e\u0436\u043d\u043e \ud83d\ude35",depth:15}};const v=e=>{let{className:s,defaultPosition:o}=e;const d=(0,m.zy)(),v=(0,i.useMemo)((()=>new URLSearchParams(d.search)),[d.search]),b=(0,i.useMemo)((()=>new(l())),[]);o=(0,i.useMemo)((()=>o||v.get(p._.chessDefaultPosition)||b.fen()),[o,v,b]);const[w,x]=(0,i.useState)(o),[_,C]=(0,i.useState)("easy");function j(e){const s=b.move(e);return x(b.fen()),console.log(s),null!==s&&(b.game_over()||b.in_draw()?(h.R.checkmateSound.play(),!1):b.in_check()?(h.R.checkSound.play(),!0):"O-O-O"===s.san||"O-O"===s.san?(h.R.castlingSound.play(),!0):s.captured?(h.R.captureSound.play(),!0):(h.R.moveSound.play(),!0))}return(0,i.useEffect)((()=>{b.load(o)}),[o,b]),(0,k.jsx)("div",{className:(0,n.x)(t,{},[s]),children:(0,k.jsxs)("div",{className:c,children:[(0,k.jsx)("div",{className:a,children:Object.entries(S).map((e=>{let[s,o]=e;return(0,k.jsx)(r.$n,{onClick:()=>C(s),theme:r.Ox.CLASSIC,active:_===s,children:o.text},"".concat(s))}))}),(0,k.jsx)(u.Ve,{id:"chessboard",position:w,onPieceDrop:function(e,s,o){console.log(e,s,o);const n=j({from:e,to:s,promotion:o[1].toLowerCase()});return n&&setTimeout((()=>{!async function(){try{const{data:e}=await f.A.get("https://stockfish.online/api/s/v2.php",{params:{fen:b.fen(),depth:S[_].depth}});if(console.log(e),!e.success)return void console.error(e.data);const{bestMove:s,ponder:o}=function(e){const s=e.match(/^bestmove\s+(\S{4,6})/),o=s?s[1]:null,n=e.match(/\sponder\s+(\S{4,6})$/);return{bestMove:o,ponder:n?n[1]:null}}(e.bestmove);console.log(s,o),j({from:s.slice(0,2),to:s.slice(2,4),promotion:s.slice(4,6).toLowerCase()})}catch(e){throw e}}()}),500),n}}),(0,k.jsxs)("div",{className:a,children:[(0,k.jsx)(r.$n,{onClick:()=>{b.reset(),x(b.fen())},children:"\u041d\u043e\u0432\u0430\u044f \u0438\u0433\u0440\u0430"}),(0,k.jsx)(r.$n,{onClick:()=>{b.undo(),b.undo(),x(b.fen())},children:"\u041d\u0430\u0437\u0430\u0434"})]})]})})},b=e=>{let{className:s}=e;return(0,k.jsx)("div",{children:(0,k.jsx)(v,{})})}}}]);
//# sourceMappingURL=794.192d5507.chunk.js.map