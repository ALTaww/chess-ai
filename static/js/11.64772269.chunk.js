"use strict";(self.webpackChunkstockfish_web=self.webpackChunkstockfish_web||[]).push([[11],{11:(e,n,s)=>{s.r(n),s.d(n,{default:()=>f});var o=s(371);const t="StockfishOnlineChessboard_StockfishOnlineChessboard__Xm861",c="StockfishOnlineChessboard_chessboardWrapper__LJGcy",a="StockfishOnlineChessboard_buttons__0Mnm9";var l=s(445),r=s(43),i=s(629),d=s.n(i),u=s(846),A=s(147),h=s(2),m=s(145),p=s(722);var C=s(801),x=s(935),k=s(579);const v={easy:{text:"\u041b\u0435\u0433\u043a\u043e \ud83e\udd13",depth:5},normal:{text:"\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e \ud83e\uddd0",depth:8},hard:{text:"\u0421\u043b\u043e\u0436\u043d\u043e \ud83d\ude35",depth:15}};const g=e=>{let{className:n,defaultPosition:s}=e;const i=(0,h.zy)(),g=(0,r.useMemo)((()=>new URLSearchParams(i.search)),[i.search]),f=(0,r.useMemo)((()=>new(d())),[]);s=(0,r.useMemo)((()=>s||g.get(m._.chessDefaultPosition)||f.fen()),[s,g,f]);const[j,w]=(0,r.useState)(s),[S,_]=(0,r.useState)("easy"),[E,b]=(0,r.useState)("white"),R=(0,r.useRef)(null);function N(e){const n=f.move(e);return w(f.fen()),console.log(n),null!==n&&(f.game_over()||f.in_draw()?(A.R.checkmateSound.play(),y(!0),!1):f.in_check()?(A.R.checkSound.play(),!0):"O-O-O"===n.san||"O-O"===n.san?(A.R.castlingSound.play(),!0):n.captured?(A.R.captureSound.play(),!0):(A.R.moveSound.play(),!0))}async function O(){try{const{controller:e,signal:n}=function(e){return e.current&&e.current.abort(),e.current=new AbortController,{controller:e.current,signal:e.current.signal}}(R);R.current=e;const{data:s}=await p.A.get("https://stockfish.online/api/s/v2.php",{params:{fen:f.fen(),depth:v[S].depth},signal:n});if(console.log(s),!s.success)return void console.error(s.data);const{bestMove:o,ponder:t}=function(e){const n=e.match(/^bestmove\s+(\S{4,6})/),s=n?n[1]:null,o=e.match(/\sponder\s+(\S{4,6})$/);return{bestMove:s,ponder:o?o[1]:null}}(s.bestmove);console.log(o,t);N({from:o.slice(0,2),to:o.slice(2,4),promotion:o.slice(4,6).toLowerCase()})}catch(e){throw e}finally{R.current=null}}(0,r.useEffect)((()=>{f.load(s)}),[s,f]);const[F,y]=(0,r.useState)(!1),B=(0,r.useCallback)((()=>{y(!F)}),[F]);return(0,k.jsxs)("div",{className:(0,o.x)(t,{},[n]),children:[(0,k.jsxs)("div",{className:c,children:[(0,k.jsx)("div",{className:a,children:Object.entries(v).map((e=>{let[n,s]=e;return(0,k.jsx)(l.$n,{onClick:()=>_(n),theme:l.Ox.CLASSIC,active:S===n,children:s.text},"".concat(n))}))}),(0,k.jsx)(u.Ve,{id:"chessboard",position:j,onPieceDrop:function(e,n,s){console.log(e,n,s);const o=N({from:e,to:n,promotion:s[1].toLowerCase()});return o&&setTimeout((()=>{O()}),500),o},boardOrientation:E}),(0,k.jsxs)("div",{className:a,children:[(0,k.jsx)(l.$n,{onClick:()=>{f.reset(),w(f.fen())},children:"\u041d\u043e\u0432\u0430\u044f \u0438\u0433\u0440\u0430"}),(0,k.jsx)(l.$n,{onClick:()=>{f.undo(),f.undo(),w(f.fen())},children:"\u041d\u0430\u0437\u0430\u0434"}),(0,k.jsx)(l.$n,{onClick:()=>{b("black"===E?"white":"black")},children:"\u041f\u0435\u0440\u0435\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u0441\u043a\u0443"}),(0,k.jsx)(l.$n,{onClick:()=>{O()},children:"\u0425\u043e\u0434\u0438"})]}),(0,k.jsx)(x.o,{fenPosition:j,onChange:e=>{const{valid:n}=f.validate_fen(e);n&&(f.load(e),w(f.fen()))}})]}),(0,k.jsxs)(C.a,{isOpen:F,onClose:B,children:[(0,k.jsx)("p",{children:"\u0418\u0433\u0440\u0430 \u043e\u043a\u043e\u043d\u0447\u0435\u043d\u0430!"}),(0,k.jsxs)("div",{className:a,children:[(0,k.jsx)(l.$n,{onClick:()=>{f.reset(),w(f.fen()),y(!1)},children:"\u041d\u043e\u0432\u0430\u044f \u0438\u0433\u0440\u0430"}),(0,k.jsx)(l.$n,{onClick:()=>{y(!1)},children:"\u041d\u0430\u0437\u0430\u0434"})]})]})]})},f=e=>{let{className:n}=e;return(0,k.jsx)("div",{children:(0,k.jsx)(g,{})})}},145:(e,n,s)=>{s.d(n,{_:()=>o});const o={chessDefaultPosition:"board-pos"}},147:(e,n,s)=>{s.d(n,{R:()=>o});const o={captureSound:new Audio("./sound/capture.mp3"),castlingSound:new Audio("./sound/castling.mp3"),checkSound:new Audio("./sound/check.mp3"),checkmateSound:new Audio("./sound/checkmate.mp3"),moveSound:new Audio("./sound/move.mp3")};for(let t of Object.keys(o))o[t].volume=.2},801:(e,n,s)=>{s.d(n,{a:()=>h});var o=s(371),t=s(43),c=s(950);const a=e=>{const{children:n,element:s=document.body}=e;return(0,c.createPortal)(n,s)},l="Modal_Modal__47RDU",r="Modal_overlay__lpaR1",i="Modal_content__TWhw1",d="Modal_opened__iZlPA",u="Modal_isClosing__AoAui";var A=s(579);const h=e=>{const{className:n,children:s,isOpen:c,onClose:h}=e,[m,p]=(0,t.useState)(!1),C=(0,t.useRef)(null),x=(0,t.useCallback)((()=>{h&&(p(!0),C.current=setTimeout((()=>{h(),p(!1)}),300))}),[h]),k=(0,t.useCallback)((e=>{"Escape"===e.key&&x()}),[x]);(0,t.useEffect)((()=>(console.log(""),c&&window.addEventListener("keydown",k),()=>{clearTimeout(C.current),window.removeEventListener("keydown",k)})),[c,k]);const v={[d]:c,[u]:m};return(0,A.jsx)(a,{children:(0,A.jsx)("div",{className:(0,o.x)(l,v,[n]),children:(0,A.jsx)("div",{className:r,onClick:x,children:(0,A.jsx)("div",{className:i,onClick:e=>{e.stopPropagation()},children:s})})})})}},935:(e,n,s)=>{s.d(n,{o:()=>m});var o=s(371);const t="FenInput_FenInput__+TRAY",c="FenInput_copyButton__j+z8x";var a=s(555),l=s(986);const r="Input_Input__hHLh7";var i=s(579);const d=["className"],u=e=>{const{className:n}=e,s=(0,l.A)(e,d);return(0,i.jsx)("input",(0,a.A)({className:(0,o.x)(r,{},[n])},s))};var A=s(43),h=s(445);const m=e=>{let{className:n,fenPosition:s,onChange:a}=e;const[l,r]=(0,A.useState)(!1);return(0,i.jsxs)("div",{className:(0,o.x)(t,{},[n]),children:[(0,i.jsx)(u,{value:l?"":s,onChange:e=>{const n=e.target.value;""!==n&&(r(!1),a&&a(n))},placeholder:"\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043f\u043e\u0437\u0438\u0446\u0438\u044e FEN, \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u0447\u0430\u0442\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),(0,i.jsx)(h.$n,{onClick:()=>{r(!0)},theme:h.Ox.CLEAR,square:!0,children:(0,i.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAJ2QAACdkBFedbSQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAADsSURBVFiFxZdRCoMwDEDfdrv+TZhY2E6v3sKC+1jLZKti02QNCKKS96w1bQAcMMWjwz46YI48RzxZ4xEAbwj3kZF407fACixGEj7m3rJGeA9JwFYiBw9sPnm/88BTAX46t4VEcU5NCXEuDYnqHDUJ1EZRkkh9Ht0LEu7BH1J4iYQZ/IyEOTzFkAEtO9cGbXiK3EiYv/lZCRH8KhC4CO+pRG7CWSxg2Wg6CY9+tZJipQ5PYSZRUmTUJSQVTk2iprxWS2jUdrGE5sJSLNF0U9p0W968MZmN4UcSP73hv5vTET7t+QjcDOEpug3PvQCCkD3RJqwD7gAAAABJRU5ErkJggg==",width:32,alt:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})}),(0,i.jsx)(h.$n,{onClick:()=>{navigator.clipboard.writeText(s),console.log("copied")},theme:h.Ox.CLEAR,className:c,square:!0,children:(0,i.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAADsAAAA7AF5KHG9AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAATVJREFUWIXt179KxEAQx/GP3pVaKPgMKhy2FmJnYWV3PoaPIIJv4L2EYCFWJ2hpow8gXC+CFgp67XkWd5E1Ekk2uT9FvhDCTjIzP3azkx1mzEJqvIwjtNCIjNnDCQZFHZt4wLCCay9G+U5FyR+xFiOgHQS5xFJMkKIsZtjP0Z+GgGaG/Ss1XsW2+Fnp4x5veQWE7OIKK5HJE95xgLvQmLUEIZ0KkhvHOEsb88xAa3wfGO3vXsHE62O/Brb+ezHcBe3Anti6BROHXAdxfpFnCRI+Swj4yHpQRMBEqAXUAmoBtYBQQFjpMitX1YQ/oxucGtXr21kIGOB4WokT5uobmHsBsY1KWd+fg8QLNiL8N/Eq40CSh2fVNCxDPKWD51mCPwfJEnTShnRzmsUh9pXrC7q4iPSfHN8P6WXseTd0UwAAAABJRU5ErkJggg==",alt:"\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})})]})}}}]);
//# sourceMappingURL=11.64772269.chunk.js.map